<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Financing the Future of Healing: A Secured Real Estate Loan for Ceremonia Spaces</title>
    <link rel="icon" type="image/png" href="images/ceremonia_icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;500;600;700&family=Lora:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Lora', serif;
            background-color: #f5f3ff;
            color: #3D352E;
        }
        h1, h2, h3, h4, h5, h6, .stat-value, .stat-label, button, .highlight-value, .table th {
            font-family: 'Public Sans', sans-serif;
        }
        .section-bg {
            background-color: #FFFFFF;
        }
        .stat-card {
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.08);
        }
        .stat-value {
            font-size: 2.25rem;
            font-weight: 700;
            color: #6283C2; /* cielo cerulean */
        }
        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }
        .table-container {
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            background: #000;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .calculator-card, .financials-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            margin-bottom: 1.5rem;
        }
        .calculator-input-group {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }
        .calculator-input-group label {
            flex-basis: 50%;
            font-size: 0.875rem;
            color: #475569;
            margin-right: 0.5rem;
        }
        .calculator-input-group .input-wrapper {
            flex-basis: 50%;
            position: relative;
        }
        .calculator-input-group input, .calculator-input-group select {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.375rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .calculator-input-group input:focus, .calculator-input-group select:focus {
            outline: none;
            border-color: #65C5B2;
            box-shadow: 0 0 0 2px rgba(101, 197, 178, 0.4);
        }
        .calculator-input-group .adornment {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #64748b;
            pointer-events: none;
        }
        .calculator-input-group input.has-adornment {
            padding-left: 2rem;
        }
        .calculator-tab {
            padding: 0.5rem 1rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            color: #475569;
            font-weight: 500;
            font-size: 0.875rem;
            white-space: nowrap;
        }
        .calculator-tab.active {
            color: #4a9484;
            border-bottom-color: #65C5B2;
        }
        .main-scenario-btn {
            transition: all 0.2s ease;
        }
        .main-scenario-btn.active {
            background-color: #6283C2; /* cielo cerulean */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .strategy-card {
            background-color: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .details-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .model3-btn.active {
            background-color: #65C5B2; /* tierra teal */
            color: white;
        }
        .util-btn.active {
            background-color: #496291; /* darker cerulean */
            color: white;
        }
        pre {
            font-family: 'Courier New', Courier, monospace;
            background-color: #f8fafc;
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 0.8rem;
            line-height: 1.4;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#investment-ask">
                <img src="images/ceremonia_logo_horiz_color.png" alt="Ceremonia Spaces Logo" class="h-8 md:h-10 w-auto">
            </a>
            <a href="#contact" class="bg-[#65C5B2] text-white px-5 py-2 rounded-lg text-sm font-semibold hover:bg-opacity-90 transition-colors">
                Contact
            </a>
        </div>
    </header>

    <main>
        <!-- Section 1: Investment Ask -->
        <section id="investment-ask" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                     <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold tracking-tight text-[#3D352E]">Financing the Future of Healing: A Secured Real Estate Loan for Ceremonia Spaces</h1>
                     <p class="text-lg text-gray-700 mt-4 max-w-3xl mx-auto">This document outlines a secured debt offering of $650,000 for the acquisition and renovation of the commercial property at 538 Commons Dr, Golden, CO. The loan is secured by a 2nd lien position on the real estate and will be leased to Ceremonia Spaces Inc. under a long-term NNN lease. Repayment is de-risked by the tenant's guaranteed anchor revenue, a clear path to profitability, and a personal guarantee from the founder.</p>
                </div>
                <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch">
                    <div class="table-container border-2 border-[#65C5B2] flex flex-col">
                        <h3 class="text-lg font-semibold text-white bg-[#65C5B2] p-4 text-center">Ask 1: $650,000 Secured Loan</h3>
                        <div class="p-4 text-center text-sm text-gray-600">for <span class="font-semibold">Ceremonia Spaces Colorado I LLC</span> (the LandCo SPV)</div>
                        <dl class="divide-y divide-gray-200 text-sm flex-grow">
                            <div class="grid grid-cols-2 gap-4 p-3"><dt class="font-medium text-gray-600">Position</dt><dd class="text-gray-800 font-semibold text-right">2nd Position</dd></div>
                            <div class="grid grid-cols-2 gap-4 p-3"><dt class="font-medium text-gray-600">Annual Interest</dt><dd class="text-gray-800 font-semibold text-right">10.0%</dd></div>
                            <div class="grid grid-cols-2 gap-4 p-3"><dt class="font-medium text-gray-600">Amortization</dt><dd class="text-gray-800 font-semibold text-right">10 Years</dd></div>
                            <div class="grid grid-cols-2 gap-4 p-3"><dt class="font-medium text-gray-600">Loan Term</dt><dd class="text-gray-800 font-semibold text-right">10 Years</dd></div>
                            <div class="grid grid-cols-2 gap-4 p-3 bg-[#65C5B2]/10"><dt class="font-bold text-[#4a9484]">Monthly Payment</dt><dd class="font-bold text-[#4a9484] text-right">$8,590.04</dd></div>
                        </dl>
                    </div>
                    <div class="table-container border-2 border-[#65C5B2] flex flex-col">
                        <h3 class="text-lg font-semibold text-white bg-[#65C5B2] p-4 text-center">Ask 2: $100,000 Bridge Loan</h3>
                        <div class="p-4 text-center text-sm text-gray-600">for <span class="font-semibold">Ceremonia Spaces Inc.</span> (the OpCo)</div>
                         <dl class="divide-y divide-gray-200 text-sm flex-grow">
                            <div class="grid grid-cols-2 gap-4 p-3"><dt class="font-medium text-gray-600">Position</dt><dd class="text-gray-800 font-semibold text-right">3rd Position</dd></div>
                            <div class="grid grid-cols-2 gap-4 p-3"><dt class="font-medium text-gray-600">Annual Interest</dt><dd class="text-gray-800 font-semibold text-right">11.0%</dd></div>
                            <div class="grid grid-cols-2 gap-4 p-3"><dt class="font-medium text-gray-600">Type</dt><dd class="text-gray-800 font-semibold text-right">Interest Only</dd></div>
                            <div class="grid grid-cols-2 gap-4 p-3"><dt class="font-medium text-gray-600">Loan Term</dt><dd class="text-gray-800 font-semibold text-right">12 Months</dd></div>
                            <div class="grid grid-cols-2 gap-4 p-3 bg-[#65C5B2]/10"><dt class="font-bold text-[#4a9484]">Monthly Payment</dt><dd class="font-bold text-[#4a9484] text-right">$916.67</dd></div>
                        </dl>
                    </div>
                </div>
                 <p class="mt-8 text-sm text-gray-500 max-w-2xl mx-auto text-center">The acquisition is partially funded by $550k in 1st position seller financing, further securing the investment.</p>
            </div>
        </section>

        <section id="real-estate-analysis" class="py-16 md:py-24 section-bg border-t">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Real Estate Investment Analysis</h2>
                    <p class="mt-3 max-w-3xl mx-auto text-gray-600">The loan is secured by the property at 538 Commons Dr, Golden, CO. The acquisition is well-supported by market data, and the property's location and condition are ideal for its intended use.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3068.751680199148!2d-105.2913388846247!3d39.7225199794519!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876b8180a53b1229%3A0x4a4c483a3bff8b27!2s538%20Commons%20Dr%2C%20Golden%2C%20CO%2080401!5e0!3m2!1sen!2sus!4v1689708940833!5m2!1sen!2sus" width="100%" height="500" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" class="rounded-xl shadow-lg"></iframe>
                    </div>
                    <div>
                        <div class="bg-white p-6 rounded-lg border">
                            <h4 class="font-bold text-lg">Property Highlights</h4>
                            <ul class="mt-2 text-sm text-gray-700 list-disc list-inside space-y-2">
                                <li>7,062 sq. ft. two-story office building with a new roof (2021).</li>
                                <li>Located in a business park with a strong focus on health and wellness.</li>
                                <li>Tranquil, private setting with mountain views, yet conveniently just off I-70 for easy access.</li>
                                <li>Will be delivered vacant, allowing immediate customization.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="nnn-lease" class="py-16 md:py-24">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Repayment Security: The NNN Lease</h2>
                <p class="mt-3 max-w-3xl mx-auto text-gray-600">The property-owning entity (LandCo) will execute a long-term Triple Net (NNN) lease with the operating company (OpCo), Ceremonia Spaces Inc. This structure ensures all property expenses and debt service are covered directly by the tenant, providing a stable, predictable income stream to service the loan.</p>
                 <div class="max-w-4xl mx-auto mt-8 table-container">
                    <h3 class="text-lg font-semibold bg-gray-50 p-4 text-center">Rent Coverage Analysis (Year 1, Base Case)</h3>
                    <table class="w-full">
                         <tbody class="divide-y">
                            <tr>
                                <td class="p-4">Total Annual NNN Lease Payment</td>
                                <td class="p-4 text-right font-mono">$167,004</td>
                                <td class="p-4 text-sm text-gray-500">Covers 100% of property debt & expenses</td>
                            </tr>
                            <tr>
                                <td class="p-4">Less: Guaranteed Anchor Revenue</td>
                                <td class="p-4 text-right font-mono">($96,000)</td>
                                <td class="p-4 text-sm text-gray-500">Covers 57% of the lease from Day 1</td>
                            </tr>
                            <tr class="bg-gray-50">
                                <td class="p-4 font-semibold">Remaining Rent Obligation</td>
                                <td class="p-4 text-right font-semibold font-mono">$71,004</td>
                                <td class="p-4 text-sm"></td>
                            </tr>
                             <tr class="bg-green-50">
                                <td class="p-4 font-semibold text-green-800">Projected Tenant Annual Revenue</td>
                                <td class="p-4 text-right font-semibold text-green-800 font-mono">$907,000</td>
                                <td class="p-4 text-sm font-semibold text-green-800">Provides a >5.4x coverage ratio on the total lease payment</td>
                            </tr>
                         </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="loan-terms-summary" class="py-16 md:py-24 section-bg border-t">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Loan Terms Summary</h2>
                </div>
                <div class="max-w-4xl mx-auto table-container">
                    <table class="w-full text-left">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="p-4 font-semibold">Term</th>
                                <th class="p-4 font-semibold">1st Position: Seller Financing</th>
                                <th class="p-4 font-semibold text-teal-800">2nd Position: Secured Loan (This Offer)</th>
                                <th class="p-4 font-semibold">3rd Position: Bridge Loan</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
                            <tr>
                                <td class="p-4 font-semibold">Amount</td>
                                <td class="p-4 font-mono">$550,000</td>
                                <td class="p-4 font-mono text-teal-800 font-bold">$650,000</td>
                                <td class="p-4 font-mono">$100,000</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-semibold">Interest Rate</td>
                                <td class="p-4 font-mono">7.0%</td>
                                <td class="p-4 font-mono text-teal-800 font-bold">10.0%</td>
                                <td class="p-4 font-mono">11.0%</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-semibold">Amortization</td>
                                <td class="p-4">15 Years</td>
                                <td class="p-4 text-teal-800 font-bold">10 Years</td>
                                <td class="p-4">Interest Only</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-semibold">Loan Term</td>
                                <td class="p-4">5-Year Balloon</td>
                                <td class="p-4 text-teal-800 font-bold">10 Years</td>
                                <td class="p-4">12 Months</td>
                            </tr>
                             <tr>
                                <td class="p-4 font-semibold">Personal Guarantee</td>
                                <td class="p-4">N/A</td>
                                <td class="p-4 text-teal-800 font-bold">Yes (Austin Mao)</td>
                                <td class="p-4">Yes (Austin Mao)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="proforma-calculator" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">LandCo SPV Proforma & Financial Model</h2>
                    <p class="mt-3 max-w-3xl mx-auto text-gray-600">This interactive financial model allows you to analyze the acquisition and performance of the property. Adjust the inputs to see how they impact the financial projections and debt service coverage in real-time.</p>
                </div>
                <div class="text-center">
                    <button id="toggle-calculator-btn" class="bg-[#6283C2] text-white font-bold py-3 px-8 rounded-lg hover:bg-[#496291] transition-transform transform hover:scale-105 shadow-lg">
                        Open Proforma Calculator
                    </button>
                </div>
                <div id="calculator-container" class="hidden mt-12">
                    <!-- Calculator content will be injected here by JS -->
                </div>
            </div>
        </section>
        
        <section id="due-diligence-summary" class="py-16 md:py-24 section-bg border-t">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Due Diligence Summary</h2>
                </div>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white p-4 rounded-lg border text-center">
                        <h4 class="font-bold">Appraisal</h4>
                        <p class="text-sm mt-1 text-gray-600">Appraised at <strong>$1.2M</strong>, providing a <strong>$150k immediate equity cushion</strong>. Full report available.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg border text-center">
                        <h4 class="font-bold">Property Condition</h4>
                        <p class="text-sm mt-1 text-gray-600">Inspection complete. Roof replaced in 2021. No major structural issues identified. Full report available.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg border text-center">
                        <h4 class="font-bold">Environmental</h4>
                        <p class="text-sm mt-1 text-gray-600">Phase I ESA complete. No Recognized Environmental Conditions (RECs) found. Full report available.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg border text-center">
                        <h4 class="font-bold">Zoning & Title</h4>
                        <p class="text-sm mt-1 text-gray-600">Zoning confirmed for intended use. Title search is clean. Full reports available.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="flythrough" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Virtual Fly-Through</h2>
                    <p class="mt-3 max-w-2xl mx-auto text-gray-600">Experience the space and envision the future of healing at our flagship Golden, Colorado location.</p>
                </div>
                <div class="max-w-4xl mx-auto">
                    <div class="video-container">
                        <iframe src="https://www.youtube.com/embed/WJo5Kqxagm4?si=tg_SjDmDNhjqLtfF" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </section>

        <section id="opco-financials" class="py-16 md:py-24 section-bg border-t">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Tenant's Financial Projections</h2>
                    <p class="mt-3 max-w-3xl mx-auto text-gray-600">The operating company, Ceremonia Spaces Inc., has strong growth projections, ensuring it can comfortably meet its lease obligations and generate significant profit. The model below is interactive; select a scenario to see the impact on cash flow.</p>
                </div>
                
                <div class="financials-card p-6 max-w-6xl mx-auto">
                    <h3 class="text-xl font-bold text-gray-800 mb-2 text-center">OpCo 12-Month Financial Forecast</h3>
                    <div class="flex justify-center space-x-2 md:space-x-4 mb-6" id="main-scenario-controls">
                        <button onclick="updateAll('low', this)" class="main-scenario-btn flex-1 md:flex-none py-2 px-6 text-sm font-semibold rounded-md bg-gray-200 text-gray-700 transition">Low Growth</button>
                        <button onclick="updateAll('base', this)" class="main-scenario-btn flex-1 md:flex-none py-2 px-6 text-sm font-semibold rounded-md active">Base Case</button>
                        <button onclick="updateAll('high', this)" class="main-scenario-btn flex-1 md:flex-none py-2 px-6 text-sm font-semibold rounded-md bg-gray-200 text-gray-700 transition">High Growth</button>
                    </div>
                    <div class="w-full h-96">
                        <canvas id="financialChart"></canvas>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                        <div class="text-center bg-gray-50 p-4 rounded-lg">
                            <p class="text-sm font-semibold text-gray-700">Projected 12-Month Revenue</p>
                            <p id="revenue-summary" class="text-3xl font-bold text-gray-800"></p>
                        </div>
                        <div class="text-center bg-green-50 p-4 rounded-lg border border-green-200">
                            <p class="text-sm font-semibold text-green-800">Revenue to Debt Service Ratio</p>
                            <p id="dscr-summary" class="text-3xl font-bold text-green-600"></p>
                            <p class="text-xs text-gray-500">(OpCo Revenue / Total Annual Debt Service)</p>
                        </div>
                    </div>
                     <button onclick="toggleDetails('revenue-model-details', this)" class="text-[#6283C2] text-sm mt-6 font-semibold">Show Revenue & Expense Model Details</button>
                </div>
                
                <div class="details-content max-w-6xl mx-auto" id="revenue-model-details">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8">
                        <div class="financials-card p-6 flex flex-col">
                            <h2 class="text-2xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">Revenue Model 1: Top-Down Market Share</h2>
                            <div class="mt-4 space-y-4 text-sm">
                                <div class="p-3 bg-blue-50 rounded-lg"><h4 class="font-semibold text-blue-800">Core Assumptions</h4><ul class="list-disc list-inside mt-1 text-gray-700 space-y-1"><li><strong>Market Size Basis:</strong> Uses Oregon's Q1 2025 client numbers (1,509).</li><li><strong>State Adjustments:</strong> 1.48x tourism multiplier, 1.43x population multiplier.</li><li><strong>Market Mix:</strong> 80% tourism, 20% domestic.</li><li><strong>Competitive Landscape:</strong> 1 room/micro-center, 3 rooms/healing center.</li><li><strong>Revenue per Session:</strong> $500.</li></ul></div>
                                <div><h4 class="font-semibold text-gray-700">1. Baseline Annual Sessions</h4><p class="text-gray-600">1,509 clients/qtr * 4 = <span class="font-bold text-blue-600">6,036</span></p></div>
                                <div><h4 class="font-semibold text-gray-700">2. Projected Colorado Market Size</h4><p class="text-gray-600">Tourism + Domestic = <span class="font-bold text-blue-600">8,885</span></p></div>
                                <div><h4 class="font-semibold text-gray-700">3. Ceremonia's Market Share</h4><p class="text-gray-600">14 / 69 total rooms = <span class="font-bold text-blue-600">20.29%</span></p></div>
                            </div>
                        </div>
                        <div class="financials-card p-6 flex flex-col">
                            <h2 class="text-2xl font-bold text-green-700 border-b-2 border-green-200 pb-2 mb-4">Revenue Model 2: Bottom-Up Utilization</h2>
                            <div class="mt-4 space-y-4 text-sm">
                                <div class="p-3 bg-green-50 rounded-lg"><h4 class="font-semibold text-green-800">Core Assumptions</h4><ul class="list-disc list-inside mt-1 text-gray-700 space-y-1"><li><strong>Standard Room Price:</strong> $497/day for all rooms.</li><li><strong>Phased Rollout:</strong> Phase 1 (5 Rms), Phase 2 (10 Rms), Phase 3 (14 Rms).</li></ul></div>
                                <div><h4 class="font-semibold text-gray-700 mb-2">Select Utilization Scenario:</h4><div class="flex space-x-2" id="utilization-controls"><button onclick="calculateUtilization(0.25, this)" class="util-btn flex-1 py-2 px-4 text-xs font-semibold rounded-md bg-gray-200 text-gray-700 transition">Low (25%)</button><button onclick="calculateUtilization(0.50, this)" class="util-btn flex-1 py-2 px-4 text-xs font-semibold rounded-md active">Base (50%)</button><button onclick="calculateUtilization(0.75, this)" class="util-btn flex-1 py-2 px-4 text-xs font-semibold rounded-md bg-gray-200 text-gray-700 transition">High (75%)</button></div></div>
                                <div id="utilization-output" class="mt-4"></div>
                            </div>
                        </div>
                        <div class="financials-card p-6 flex flex-col">
                            <h2 class="text-2xl font-bold text-purple-700 border-b-2 border-purple-200 pb-2 mb-4">Revenue Model 3: Facilitator Onboarding</h2>
                            <div class="mt-4 space-y-4 text-sm">
                                <div class="p-3 bg-purple-50 rounded-lg"><h4 class="font-semibold text-purple-800">Core Assumptions</h4><ul class="list-disc list-inside mt-1 text-gray-700"><li><strong>Standard Room Price:</strong> $497/day.</li><li><strong>Guaranteed Revenue:</strong> ~$18,794/month.</li><li><strong>Growth Driver:</strong> New facilitators/month.</li><li><strong>Seasonality:</strong> 65% slump in Nov/Dec.</li><li><strong>Activity:</strong> 2 room-days/facilitator/month.</li></ul></div>
                                <div><h4 class="font-semibold text-gray-700 mb-2">Select Onboarding Scenario:</h4><div class="flex space-x-2" id="model3-controls"><button onclick="updateModel3('low', this, true)" class="model3-btn flex-1 py-2 px-4 text-xs font-semibold rounded-md bg-gray-200 text-gray-700 transition">Low (+4/mo)</button><button onclick="updateModel3('base', this, true)" class="model3-btn flex-1 py-2 px-4 text-xs font-semibold rounded-md active">Base (+8/mo)</button><button onclick="updateModel3('high', this, true)" class="model3-btn flex-1 py-2 px-4 text-xs font-semibold rounded-md bg-gray-200 text-gray-700 transition">High (+16/mo)</button></div></div>
                                <div class="h-48 overflow-y-auto border rounded-lg mt-4"><table class="w-full text-left text-xs"><thead class="sticky top-0 bg-white z-10"><tr class="border-b"><th class="py-2 px-2 font-semibold">Month</th><th class="py-2 px-2 font-semibold text-right">Revenue</th><th class="py-2 px-2 font-semibold text-right">% Util.</th></tr></thead><tbody id="facilitator-table-body"></tbody></table></div>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8">
                        <div class="financials-card p-6 flex flex-col bg-blue-50 border border-blue-200 lg:col-span-2">
                             <h2 class="text-xl font-bold text-blue-700 border-b-2 border-blue-200 pb-2 mb-4">Operating Expense Breakdown</h2>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <h3 class="font-semibold text-blue-800">Fixed & Tiered Monthly Costs</h3>
                                    <p class="text-xs text-blue-700 mb-2">Costs that scale with operational phases.</p>
                                    <table class="w-full text-sm">
                                        <thead class="bg-gray-50"><tr><th class="p-2 text-left">Item</th><th class="p-2 text-center">Phase 1</th><th class="p-2 text-center">Phase 2</th><th class="p-2 text-center">Phase 3</th></tr></thead>
                                        <tbody>
                                            <tr class="border-b"><td class="p-2 font-semibold" colspan="4">Fixed Costs</td></tr>
                                            <tr class="border-b"><td class="p-2 pl-4">NNN Lease</td><td class="p-2 text-center font-mono" colspan="3">$13,917</td></tr>
                                            <tr class="border-b"><td class="p-2 pl-4">Software & Support</td><td class="p-2 text-center font-mono" colspan="3">$2,000</td></tr>
                                            <tr class="border-b"><td class="p-2 pl-4">Accounting</td><td class="p-2 text-center font-mono" colspan="3">$250</td></tr>
                                            <tr class="border-b"><td class="p-2 font-semibold" colspan="4">Tiered Costs</td></tr>
                                            <tr class="border-b"><td class="p-2 pl-4">Shared Payroll</td><td class="p-2 text-center font-mono">$16,500</td><td class="p-2 text-center font-mono">$11,655</td><td class="p-2 text-center font-mono">$9,375</td></tr>
                                            <tr class="border-b"><td class="p-2 pl-4">Janitorial</td><td class="p-2 text-center font-mono">$1,000</td><td class="p-2 text-center font-mono">$1,500</td><td class="p-2 text-center font-mono">$2,000</td></tr>
                                            <tr class="border-b"><td class="p-2 pl-4">On-Site Staff</td><td class="p-2 text-center font-mono">$2,340</td><td class="p-2 text-center font-mono">$3,120</td><td class="p-2 text-center font-mono">$4,680</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-blue-800">Variable Costs & CapEx</h3>
                                     <p class="text-xs text-blue-700 mb-2">Revenue-driven costs and one-time build-out expenses.</p>
                                     <div class="p-3 bg-white rounded-lg mb-4">
                                         <h4 class="font-semibold text-gray-700">Variable Costs</h4>
                                         <p class="text-xs text-gray-600">Composed of a 5% transaction fee on all revenue and a $75 cost per occupied room day for supplies and laundry.</p>
                                     </div>
                                     <div class="p-3 bg-white rounded-lg">
                                         <h4 class="font-semibold text-gray-700">Capital Expenditures</h4>
                                         <ul class="text-xs text-gray-600 list-disc list-inside mt-1">
                                             <li><strong>Phase 1:</strong> $64,590 (Remodel, furniture, buffer)</li>
                                             <li><strong>Phase 2:</strong> $33,500 (Construction, new furnishings)</li>
                                             <li><strong>Phase 3:</strong> $14,000 (Final furnishings)</li>
                                         </ul>
                                     </div>
                                </div>
                             </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="context" class="py-16 md:py-24 section-bg border-t">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Business Context: Why This Tenant Will Succeed</h2>
                </div>
                 <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                     <div>
                        <h3 class="text-2xl font-bold mb-4">The Colorado Psychedelic Infrastructure Crisis</h3>
                        <p class="text-gray-600">Oregon's market proves a systemic shortage of practice space exists, with a <strong>13.8-to-1 ratio</strong> of facilitators to centers. Colorado faces an even greater shortage, creating a clear and immediate demand for our tenant's services.</p>
                    </div>
                     <div>
                        <h3 class="text-2xl font-bold mb-4">The Ceremonia Solution</h3>
                        <p class="text-gray-600">Ceremonia Spaces provides the premier, turnkey, compliant facility for Colorado's hundreds of licensed facilitators, capturing an estimated <strong>20% of the state's market share</strong> from this single flagship location.</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- Section 4: Solution -->
        <section id="solution" class="py-16 md:py-24 section-bg border-t">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">The Ceremonia Solution</h2>
                    <p class="mt-3 max-w-3xl mx-auto text-gray-600">
                        The infrastructure bottleneck proven in Oregon is even more pronounced in Colorado. Ceremonia Spaces is the direct, scalable solution to this market-defining problem.
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center">
                    <div class="order-2 lg:order-1">
                        <h3 class="text-2xl font-bold">The Premier Asset in Colorado</h3>
                        <p class="mt-2 text-gray-600">Our Golden, CO facility is not just another healing center; it is in a class of its own. The data below shows a clear and defensible advantage in scale, location, and asset quality that no current competitor can match.</p>
                        
                        <div class="mt-6">
                            <div class="chart-container" style="height: 250px; max-height: 300px;">
                                <canvas id="marketShareChart"></canvas>
                            </div>
                            <p class="text-sm text-center text-gray-600 mt-2">Based on current approved and pending licenses, Ceremonia Spaces is projected to represent approximately <strong>20.29% of the overall market</strong> of licensed healing rooms from a single facility.</p>
                        </div>

                        <h3 class="text-2xl font-bold mt-8">Turnkey Compliance & Operations</h3>
                        <p class="mt-2 text-gray-600">We solve the biggest hurdles for independent facilitators:</p>
                        <ul class="mt-4 space-y-3 text-gray-700">
                            <li class="flex items-start">
                                <span class="text-[#65C5B2] mr-3 mt-1">✓</span>
                                <span><strong>Regulatory & Compliance:</strong> A fully licensed environment, removing the $6k licensing burden and operational complexity.</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-[#65C5B2] mr-3 mt-1">✓</span>
                                <span><strong>Ancillary Services:</strong> Integrated solutions for insurance, banking, and payment processing—major industry pain points.</span>
                            </li>
                             <li class="flex items-start">
                                <span class="text-[#65C5B2] mr-3 mt-1">✓</span>
                                <span><strong>Built-in Lead Generation:</strong> We are the <strong>#1 Google search result</strong> for "Colorado psilocybin" and top-ranked for "Colorado psychedelic therapy," providing a powerful client referral stream for our facilitator partners.</span>
                            </li>
                        </ul>
                    </div>
                     <div class="order-1 lg:order-2 space-y-4">
                         <img src="images/patio.jpg" alt="Outdoor patio at Ceremonia Spaces with a view of the mountains in Golden, CO." class="rounded-xl shadow-lg object-cover w-full h-auto">
                         <img src="images/group-hall.jpg" alt="Interior view of the group ceremony hall, featuring comfortable seating arranged in a circle in a spacious, well-lit room." class="rounded-xl shadow-lg object-cover w-full h-auto">
                     </div>
                </div>
            </div>
        </section>
        
        <section id="ecosystem" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">The Ceremonia Ecosystem</h2>
                    <p class="mt-3 max-w-3xl mx-auto text-gray-600">The tenant's success is supported by a synergistic ecosystem of entities that drive revenue, ensure compliance, and build a defensible market position.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto items-start">
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-full flex flex-col">
                        <h3 class="font-bold text-xl text-center">🌿 Ceremonia Journeys</h3>
                        <p class="text-center text-sm font-semibold text-gray-500">(Nonprofit)</p>
                        <p class="mt-4 text-sm text-gray-600 flex-grow">The established and trusted brand for legal psilocybin retreats. It provides a foundation of trust and operational excellence, and acts as a primary anchor tenant.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-full flex flex-col">
                        <h3 class="font-bold text-xl text-center">🧑‍🎓 Ceremonia EDU</h3>
                        <p class="text-center text-sm font-semibold text-gray-500">(For-Profit Training)</p>
                        <p class="mt-4 text-sm text-gray-600 flex-grow">A state-approved facilitator training program that serves as a customer acquisition flywheel, funneling newly licensed facilitators directly to Ceremonia Spaces.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-full flex flex-col">
                         <h3 class="font-bold text-xl text-center">🏢 Ceremonia Spaces</h3>
                        <p class="text-center text-sm font-semibold text-gray-500">(Public Benefit Corp.)</p>
                        <p class="mt-4 text-sm text-gray-600 flex-grow">The scalable, for-profit real estate arm (the tenant) that provides turnkey facilities to the captive B2B market created by our brand and trained by Ceremonia EDU.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="legal-overview" class="py-16 md:py-24 section-bg border-t">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                     <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Legal & Entity Structure</h2>
                     <p class="mt-3 max-w-3xl mx-auto text-gray-600">Our sophisticated, multi-entity structure ensures regulatory compliance, maximizes tax efficiency, minimizes investor liability, and clearly delineates roles to facilitate scalable growth and risk mitigation.</p>
                </div>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start max-w-6xl mx-auto">
                    <div class="bg-white p-6 rounded-lg border">
                        <h3 class="font-bold text-lg mb-2">Ceremonia Holdings, LLC</h3>
                        <p class="text-sm text-gray-700">Provides consolidated governance and holds ownership stakes. Acts as the General Partner (GP) of the property-owning LLC.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg border">
                        <h3 class="font-bold text-lg mb-2">Ceremonia Spaces Colorado I, LLC (LandCo)</h3>
                        <p class="text-sm text-gray-700">The property owner and investment SPV. It is fully insulated from direct operational risk and provides a fixed return to investors via the lease.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg border">
                        <h3 class="font-bold text-lg mb-2">Ceremonia Spaces, Inc. (OpCo)</h3>
                        <p class="text-sm text-gray-700">The master tenant responsible for all operations and lease payments. Generates non-280E taxable income.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg border">
                        <h3 class="font-bold text-lg mb-2">Ceremonia Healing Center, Inc.</h3>
                        <p class="text-sm text-gray-700">A separate C-Corp that holds the state healing center license, isolating all plant-touching activities and IRS §280E tax exposure.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="founder" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Experienced Leadership</h2>
                </div>
                <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-1">
                        <img src="images/austin_mao.jpg" alt="Austin Mao, Founder & CEO of Ceremonia" class="rounded-xl shadow-lg object-cover w-full h-auto">
                    </div>
                    <div class="md:col-span-2 bg-white p-8 rounded-xl border border-gray-200">
                        <h3 class="text-2xl font-bold">Austin Mao</h3>
                        <p class="text-md font-semibold text-[#65C5B2]">Founder & CEO, Ceremonia</p>
                        <p class="mt-4 text-gray-600">Austin is a pioneering entrepreneur and policy leader in the regulated psychedelic ecosystem. As Colorado's first licensed Legacy Healer, he combines deep facilitation experience with a proven track record of scaling hospitality and real estate ventures, including building the largest short-term rental portfolio in Las Vegas.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-16 md:py-24 section-bg border-t">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-[#3D352E]">Contact</h2>
                 <p class="mt-3 max-w-2xl mx-auto text-gray-600">Ready to discuss this secured debt opportunity?</p>
                <div class="mt-8">
                    <p class="text-xl font-semibold">Austin Mao</p>
                    <a href="mailto:austin@ceremoniacircle.org" class="text-lg text-[#6283C2] hover:text-[#496291] transition-colors">austin@ceremoniacircle.org</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="border-t border-gray-200 bg-white">
        <div class="container mx-auto px-6 py-8 text-center text-gray-500">
            <img src="images/ceremonia_logo_horiz_color.png" alt="Ceremonia Spaces Logo" class="h-8 mx-auto mb-4">
            <p class="text-sm">&copy; 2025 Ceremonia. For informational purposes only.</p>
        </div>
    </footer>


<script>
document.addEventListener('DOMContentLoaded', function () {
    const currencyFormatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 });

    window.toggleDetails = function(elementId, button) {
        const content = document.getElementById(elementId);
        if (content.style.maxHeight && content.style.maxHeight !== '0px') {
            content.style.maxHeight = '0px';
            button.textContent = button.textContent.replace("Hide", "Show");
        } else {
            content.style.maxHeight = content.scrollHeight + "px";
            button.textContent = button.textContent.replace("Show", "Hide");
        }
    }

    // --- Proforma Calculator Logic ---
    const calculatorContainer = document.getElementById('calculator-container');
    const toggleButton = document.getElementById('toggle-calculator-btn');
    const calculatorHTML = `
        <div class="max-w-7xl mx-auto">
             <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div id="input-column">
                    <div class="calculator-card">
                        <h2 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">Property & Acquisition</h2>
                        <div class="calculator-input-group"><label for="purchasePrice">Purchase Price</label><div class="input-wrapper"><span class="adornment">$</span><input type="number" id="purchasePrice" value="1050000" class="has-adornment text-right"></div></div>
                        <div class="calculator-input-group"><label for="renovationCosts">Renovation Costs</label><div class="input-wrapper"><span class="adornment">$</span><input type="number" id="renovationCosts" value="85000" class="has-adornment text-right"></div></div>
                        <div class="calculator-input-group"><label for="miscCosts">Misc. Closing Costs</label><div class="input-wrapper"><span class="adornment">$</span><input type="number" id="miscCosts" value="15000" class="has-adornment text-right"></div></div>
                        <div class="calculator-input-group"><label for="buildingSize">Building Size (SF)</label><div class="input-wrapper"><input type="number" id="buildingSize" value="7062" class="text-right"></div></div>
                    </div>
                    <div class="calculator-card">
                        <h2 class="text-lg font-semibold text-gray-800 mb-4 border-b pb-2">Financing Stack</h2>
                        <div class="border p-4 rounded-md bg-gray-50 mb-4">
                            <h3 class="font-semibold text-gray-700 mb-2">Seller Financing (1st Position)</h3>
                            <div class="calculator-input-group"><label>Loan Amount</label><div class="input-wrapper"><span class="adornment">$</span><input type="number" id="sellerLoanAmount" value="550000" class="has-adornment text-right"></div></div>
                            <div class="calculator-input-group"><label>Annual Interest Rate</label><div class="input-wrapper"><span class="adornment">%</span><input type="number" id="sellerInterestRate" value="7" step="0.1" class="has-adornment text-right"></div></div>
                            <div class="calculator-input-group"><label>Amortization Period</label><div class="input-wrapper"><input type="number" id="sellerAmortization" value="15" class="text-right"></div></div>
                            <div class="calculator-input-group"><label>Loan Term (Balloon)</label><div class="input-wrapper"><input type="number" id="sellerTerm" value="5" class="text-right"></div></div>
                        </div>
                        <div id="investor-capital-container"></div>
                    </div>
                </div>
                <div id="output-column">
                    <div class="calculator-card">
                        <div class="flex border-b border-gray-200 overflow-x-auto">
                            <div id="tab-summary" class="calculator-tab active">Summary</div>
                            <div id="tab-annual" class="calculator-tab">Annual View</div>
                        </div>
                        <div id="view-summary" class="pt-4 space-y-6">
                            <div><h3 class="font-semibold text-lg text-gray-700 mb-3">Deal Summary</h3><div class="space-y-2 text-sm"><div class="flex justify-between"><span class="text-gray-500">Total Capital Required</span><span id="totalCapitalRequired" class="font-semibold"></span></div><hr class="my-2"><div class="flex justify-between"><span class="text-gray-500">Seller Financing</span><span id="sourceSellerFinancing" class="font-semibold"></span></div><div class="flex justify-between"><span class="text-gray-500">Investor Capital Required</span><span id="sourceInvestorCapital" class="font-semibold text-green-600"></span></div></div></div>
                            <div><h3 class="font-semibold text-lg text-gray-700 mb-3">Required Tenant Rent (NNN Lease)</h3><div class="grid grid-cols-1 gap-4 text-sm"><div class="col-span-2 bg-blue-50 border border-blue-200 p-3 rounded-lg text-center"><div class="text-blue-700 font-semibold">Total Monthly Cost to Tenant</div><div id="totalRentMonthly" class="font-bold text-blue-800 text-2xl"></div><div id="totalRentPerSf" class="text-blue-600"></div></div></div></div>
                        </div>
                        <div id="view-annual" class="pt-4 hidden"><h3 class="font-semibold text-lg text-gray-700 mb-3">Consolidated 5-Year Schedule</h3><div class="overflow-x-auto"><table class="w-full text-sm text-left"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-2">Year</th><th class="p-2 text-right">Debt Service</th><th class="p-2 text-right">Principal Paid</th><th class="p-2 text-right">Interest Paid</th><th class="p-2 text-right">Ending Balance</th></tr></thead><tbody id="annualTableBody"></tbody></table></div></div>
                    </div>
                </div>
            </div>
        </div>
    `;
    if(toggleButton) {
        toggleButton.addEventListener('click', () => {
            const isHidden = calculatorContainer.classList.contains('hidden');
            if (isHidden) {
                calculatorContainer.innerHTML = calculatorHTML;
                calculatorContainer.classList.remove('hidden');
                toggleButton.textContent = 'Close Proforma Calculator';
                initializeCalculator();
            } else {
                calculatorContainer.classList.add('hidden');
                calculatorContainer.innerHTML = '';
                toggleButton.textContent = 'Open Interactive Proforma Calculator';
            }
        });
    }

    function initializeCalculator() {
        const $ = (selector) => calculatorContainer.querySelector(selector);
        const $$ = (selector) => calculatorContainer.querySelectorAll(selector);
        const HOLDING_PERIOD = 5;
        let investorGroupId = 0;

        function calculateLoan(principal, annualRate, amortizationYears, termYears) {
            if (principal <= 0 || annualRate <= 0 || amortizationYears <= 0) {
                const schedule = Array.from({ length: termYears }, (_, i) => ({ year: i + 1, debtService: 0, principalPaid: 0, interestPaid: 0, endingBalance: principal }));
                return { monthlyPayment: 0, annualPayment: 0, schedule };
            }
            const monthlyRate = annualRate / 12 / 100;
            const numberOfPayments = amortizationYears * 12;
            const monthlyPayment = principal * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            let balance = principal;
            let schedule = [];
            for (let year = 1; year <= termYears; year++) {
                let annualInterest = 0, annualPrincipal = 0;
                for (let month = 1; month <= 12; month++) {
                    if (balance > 0) {
                        const interestPayment = balance * monthlyRate;
                        const principalPayment = monthlyPayment - interestPayment;
                        balance -= principalPayment;
                        annualInterest += interestPayment;
                        annualPrincipal += principalPayment;
                    }
                }
                schedule.push({ year, debtService: monthlyPayment * 12, principalPaid: annualPrincipal, interestPaid: annualInterest, endingBalance: balance < 0 ? 0 : balance });
            }
            return { monthlyPayment: isNaN(monthlyPayment) ? 0 : monthlyPayment, annualPayment: isNaN(monthlyPayment) ? 0 : monthlyPayment * 12, schedule };
        }

        function calculateInterestOnlyLoan(principal, annualRate, termYears) {
            if (principal <= 0) {
                const schedule = Array.from({ length: termYears }, (_, i) => ({ year: i + 1, debtService: 0, principalPaid: 0, interestPaid: 0, endingBalance: principal }));
                return { monthlyPayment: 0, annualPayment: 0, schedule };
            }
            const annualPayment = principal * (annualRate / 100);
            const schedule = Array.from({ length: termYears }, (_, i) => ({ year: i + 1, debtService: annualPayment, principalPaid: 0, interestPaid: annualPayment, endingBalance: principal }));
            return { monthlyPayment: annualPayment / 12, annualPayment, schedule };
        }

        function runProforma() {
            const purchasePrice = parseFloat($('#purchasePrice').value) || 0;
            const renovationCosts = parseFloat($('#renovationCosts').value) || 0;
            const miscCosts = parseFloat($('#miscCosts').value) || 0;
            const buildingSize = parseFloat($('#buildingSize').value) || 0;
            const totalCapitalRequired = purchasePrice + renovationCosts + miscCosts;

            const financingSources = [];
            const sellerLoanAmount = parseFloat($('#sellerLoanAmount').value) || 0;
            financingSources.push({ id: 'seller', name: 'Seller Financing', amount: sellerLoanAmount, rate: parseFloat($('#sellerInterestRate').value) || 0, amortization: parseFloat($('#sellerAmortization').value) || 0, term: parseFloat($('#sellerTerm').value) || 0, type: 'amortizing' });

            let totalInvestorCapital = 0;
            $$('.investor-card').forEach(card => {
                const id = card.dataset.id;
                const investorAmount = parseFloat($(`#investorAmount-${id}`).value) || 0;
                totalInvestorCapital += investorAmount;
                financingSources.push({ id, name: $(`#investorName-${id}`).value || `Investor ${id}`, amount: investorAmount, rate: parseFloat($(`#investorRate-${id}`).value) || 0, amortization: parseFloat($(`#investorAmortization-${id}`)?.value) || 0, term: parseFloat($(`#investorTerm-${id}`).value) || 0, type: $(`#investorType-${id}`).value, isInvestor: true });
            });
            
            const investorCapitalRequired = totalCapitalRequired - sellerLoanAmount;
            
            let totalMonthlyPayment = 0, totalAnnualPayment = 0;
            financingSources.forEach(source => {
                source.result = source.type === 'interest-only' ? calculateInterestOnlyLoan(source.amount, source.rate, source.term) : calculateLoan(source.amount, source.rate, source.amortization, source.term);
                totalMonthlyPayment += source.result.monthlyPayment;
                totalAnnualPayment += source.result.annualPayment;
            });

            $('#totalCapitalRequired').textContent = currencyFormatter.format(totalCapitalRequired);
            $('#sourceSellerFinancing').textContent = currencyFormatter.format(sellerLoanAmount);
            $('#sourceInvestorCapital').textContent = currencyFormatter.format(investorCapitalRequired);
            $('#sourceInvestorCapital').classList.toggle('text-red-600', totalInvestorCapital.toFixed(0) !== investorCapitalRequired.toFixed(0));

            const totalMonthlyRent = totalMonthlyPayment;
            $('#totalRentMonthly').textContent = currencyFormatter.format(totalMonthlyRent);
            const rentPerSf = buildingSize > 0 ? (totalMonthlyRent * 12) / buildingSize : 0;
            $('#totalRentPerSf').textContent = `${currencyFormatter.format(rentPerSf)} / SF / Year`;

            const annualTableBody = $('#annualTableBody');
            annualTableBody.innerHTML = '';
            for (let year = 1; year <= HOLDING_PERIOD; year++) {
                let yearData = { debtService: 0, principalPaid: 0, interestPaid: 0, endingBalance: 0 };
                financingSources.forEach(source => {
                    const yearSchedule = source.result.schedule.find(s => s.year === year);
                    if (yearSchedule) {
                        yearData.debtService += yearSchedule.debtService;
                        yearData.principalPaid += yearSchedule.principalPaid;
                        yearData.interestPaid += yearSchedule.interestPaid;
                        yearData.endingBalance += yearSchedule.endingBalance;
                    }
                });
                annualTableBody.innerHTML += `<tr class="border-b border-gray-200"><td class="p-2 font-medium">${year}</td><td class="p-2 text-right">${currencyFormatter.format(yearData.debtService)}</td><td class="p-2 text-right">${currencyFormatter.format(yearData.principalPaid)}</td><td class="p-2 text-right">${currencyFormatter.format(yearData.interestPaid)}</td><td class="p-2 text-right">${currencyFormatter.format(yearData.endingBalance)}</td></tr>`;
            }
        }

        function addInvestorCard(defaults = {}) {
            investorGroupId++;
            const container = $('#investor-capital-container');
            const card = document.createElement('div');
            card.className = 'border p-4 rounded-md mb-4 investor-card';
            card.dataset.id = investorGroupId;
            card.innerHTML = `<input type="text" id="investorName-${investorGroupId}" placeholder="Investor Group Name" class="w-full font-semibold text-gray-700 mb-2 border-0 p-0 focus:ring-0 bg-transparent"><div class="calculator-input-group"><label>Financing Type</label><select id="investorType-${investorGroupId}" class="w-full"><option value="amortizing">Amortizing Debt</option><option value="interest-only">Interest-Only</option></select></div><div class="calculator-input-group"><label>Loan Amount</label><div class="input-wrapper"><span class="adornment">$</span><input type="number" id="investorAmount-${investorGroupId}" value="0" class="has-adornment text-right"></div></div><div class="calculator-input-group"><label>Annual Interest Rate</label><div class="input-wrapper"><span class="adornment">%</span><input type="number" id="investorRate-${investorGroupId}" value="10" step="0.1" class="has-adornment text-right"></div></div><div id="amortization-wrapper-${investorGroupId}"><div class="calculator-input-group"><label>Amortization Period</label><div class="input-wrapper"><input type="number" id="investorAmortization-${investorGroupId}" value="15" class="text-right"></div></div></div><div class="calculator-input-group"><label>Loan Term (Balloon)</label><div class="input-wrapper"><input type="number" id="investorTerm-${investorGroupId}" value="15" class="text-right"></div></div>`;
            container.appendChild(card);
            
            if (defaults.name) $(`#investorName-${investorGroupId}`).value = defaults.name;
            if (defaults.type) $(`#investorType-${investorGroupId}`).value = defaults.type;
            if (defaults.amount) $(`#investorAmount-${investorGroupId}`).value = defaults.amount;
            if (defaults.rate) $(`#investorRate-${investorGroupId}`).value = defaults.rate;
            if (defaults.amortization) $(`#investorAmortization-${investorGroupId}`).value = defaults.amortization;
            if (defaults.term) $(`#investorTerm-${investorGroupId}`).value = defaults.term;

            $(`#investorType-${investorGroupId}`).addEventListener('change', handleTypeChange);
            card.querySelectorAll('input, select').forEach(el => el.addEventListener('input', runProforma));
            handleTypeChange({ target: { id: `investorType-${investorGroupId}`, value: defaults.type || 'amortizing' } });
        }

        function handleTypeChange(event) {
            const id = event.target.id.split('-')[1];
            const wrapper = $(`#amortization-wrapper-${id}`);
            wrapper.style.display = event.target.value === 'interest-only' ? 'none' : 'block';
        }
        
        $$('#tab-summary, #tab-annual').forEach(tab => {
            tab.addEventListener('click', () => {
                $$('.calculator-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                $('#view-summary').classList.toggle('hidden', tab.id !== 'tab-summary');
                $('#view-annual').classList.toggle('hidden', tab.id !== 'tab-annual');
            });
        });

        $$('#input-column input, #input-column select').forEach(el => el.addEventListener('input', runProforma));
        
        addInvestorCard({ name: "Lead Investor Debt (2nd Pos)", amount: "650000", rate: "10", amortization: "10", term: "10", type: "amortizing" });
        addInvestorCard({ name: "LP Investor Debt (3rd Pos)", amount: "100000", rate: "11", term: "1", type: "interest-only" });

        runProforma();
    }
    
    // --- OpCo Financial Chart Logic ---
    let financialChart;
    const financialData = {
        labels: ['Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb', 'Mar', 'Apr', 'May'],
        revenue: {
            low: [0, 0, 0, 14500, 33342, 35906, 41463, 58986, 67530, 76074, 84618, 93162],
            base: [0, 0, 0, 14500, 42183, 50825, 66735, 96472, 114060, 131648, 149236, 166824],
            high: [0, 0, 0, 14500, 50865, 65744, 92000, 151430, 186690, 221950, 257210, 292470]
        },
        opex: {
            low: [-24500, -20300, -10300, -37629, -41116, -41042, -41595, -42981, -43846, -44711, -46076, -46941],
            base: [-24500, -20300, -10300, -37629, -41458, -42421, -43961, -45717, -47342, -48967, -51092, -52717],
            high: [-24500, -20300, -10300, -37629, -41793, -43788, -46325, -49867, -52567, -55267, -58467, -61167]
        },
        cashBalance: {
            low: [25500, 5200, 94900, 7181, -593, -5729, -5861, 23644, 47328, 78691, 117233, 163454],
            base: [25500, 5200, 94900, 7181, 7906, 16310, 39084, 56339, 123057, 205738, 303882, 417989],
            high: [25500, 5200, 94900, 7181, 16253, 38209, 83884, 151947, 286070, 452753, 651496, 882799]
        }
    };
    
    function createFinancialChart(scenario) {
        const financialChartEl = document.getElementById('financialChart');
        if (!financialChartEl) return;
        const ctx = financialChartEl.getContext('2d');
        financialChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: financialData.labels,
                datasets: [{
                    label: 'Revenue', data: financialData.revenue[scenario],
                    backgroundColor: '#65C5B2', order: 2
                }, {
                    label: 'Operating Expenses', data: financialData.opex[scenario],
                    backgroundColor: '#FBAE17', order: 2
                }, {
                    label: 'Cash Balance', data: financialData.cashBalance[scenario],
                    type: 'line', borderColor: '#6283C2', yAxisID: 'y1', order: 1, tension: 0.3
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: {
                    x: { stacked: true },
                    y: { stacked: true, position: 'left', title: { display: true, text: 'Revenue & OpEx ($)' }, ticks: { callback: value => '$' + (value/1000) + 'k' } },
                    y1: { position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'Cash Balance ($)' }, ticks: { callback: value => '$' + (value/1000) + 'k' } }
                }
            }
        });
    }
    
    window.updateAll = function(scenario, clickedButton) {
        if (!financialChart) {
            createFinancialChart(scenario);
        } else {
            financialChart.data.datasets[0].data = financialData.revenue[scenario];
            financialChart.data.datasets[1].data = financialData.opex[scenario];
            financialChart.data.datasets[2].data = financialData.cashBalance[scenario];
            financialChart.update();
        }

        const totalRevenue = financialData.revenue[scenario].reduce((acc, val) => acc + val, 0);
        const revenueSummaryEl = document.getElementById('revenue-summary');
        if(revenueSummaryEl) revenueSummaryEl.textContent = currencyFormatter.format(totalRevenue);
        
        const annualLeasePayment = 13917 * 12;
        const dscr = totalRevenue / annualLeasePayment;
        const dscrSummaryEl = document.getElementById('dscr-summary');
        if(dscrSummaryEl) dscrSummaryEl.textContent = dscr.toFixed(2) + 'x';

        document.querySelectorAll('.main-scenario-btn').forEach(button => button.classList.remove('active'));
        clickedButton.classList.add('active');
    }

    if (document.getElementById('financialChart')) {
        const mainButton = document.querySelector('#main-scenario-controls button:nth-child(2)');
        if(mainButton) updateAll('base', mainButton);
    }
    
    // --- Market Share Chart ---
    const marketShareCtx = document.getElementById('marketShareChart');
    if (marketShareCtx) {
        new Chart(marketShareCtx, {
            type: 'pie',
            data: {
                labels: ['Ceremonia Spaces Rooms', 'All Other Competitor Rooms'],
                datasets: [{
                    data: [14, 55],
                    backgroundColor: ['#65C5B2', '#F8F5F2'],
                    borderColor: ['#FFFFFF'],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    title: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                let value = context.parsed;
                                let sum = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                                let percentage = (value / sum * 100).toFixed(2) + '%';
                                return label + ': ' + percentage;
                            }
                        }
                    }
                }
            }
        });
    }
    
    window.calculateUtilization = function(rate, clickedButton) {
        const roomPrice = 497;
        const daysInPhase = 121.67;
        const phase1Potential = (5 * roomPrice * daysInPhase) * rate;
        const phase2Potential = (10 * roomPrice * daysInPhase) * rate;
        const phase3Potential = (14 * roomPrice * daysInPhase) * rate;
        const totalRevenue = phase1Potential + phase2Potential + phase3Potential;

        const outputEl = document.getElementById('utilization-output');
        if(outputEl) {
             outputEl.innerHTML = `
                <div class="mt-4 space-y-2 text-sm">
                    <div class="flex justify-between p-2 bg-gray-50 rounded"><span>Phase 1 Revenue:</span> <span class="font-semibold">${currencyFormatter.format(phase1Potential)}</span></div>
                    <div class="flex justify-between p-2 bg-gray-50 rounded"><span>Phase 2 Revenue:</span> <span class="font-semibold">${currencyFormatter.format(phase2Potential)}</span></div>
                    <div class="flex justify-between p-2 bg-gray-50 rounded"><span>Phase 3 Revenue:</span> <span class="font-semibold">${currencyFormatter.format(phase3Potential)}</span></div>
                    <div class="flex justify-between p-3 bg-green-100 rounded mt-2 text-green-800 font-bold"><span>Total Annual Revenue:</span> <span>${currencyFormatter.format(totalRevenue)}</span></div>
                </div>
            `;
        }
        document.querySelectorAll('.util-btn').forEach(button => button.classList.remove('active'));
        clickedButton.classList.add('active');
    }
    
    window.updateModel3 = function(scenario) {
        let facilitatorsPerMonth = 8;
        if (scenario === 'low') facilitatorsPerMonth = 4;
        if (scenario === 'high') facilitatorsPerMonth = 16;
        
        const guaranteedMonthlyRevenue = 18794;
        const revenuePerFacilitator = 497 * 2;
        const slumpFactor = 0.35;
        let cumulativeFacilitators = 0;
        const tableBody = document.getElementById('facilitator-table-body');
        if(tableBody) tableBody.innerHTML = '';
        const monthNames = ["Sep '25", "Oct '25", "Nov '25", "Dec '25", "Jan '26", "Feb '26", "Mar '26", "Apr '26", "May '26", "Jun '26", "Jul '26", "Aug '26"];

        for (let i = 0; i < 12; i++) {
            cumulativeFacilitators += facilitatorsPerMonth;
            let variableRevenue = cumulativeFacilitators * revenuePerFacilitator;
            if (i === 2 || i === 3) variableRevenue *= slumpFactor;
            let monthlyTotal = guaranteedMonthlyRevenue + variableRevenue;

            const roomDaysUsed = cumulativeFacilitators * 2;
            const totalAvailableRoomDays = 14 * 30.44;
            const utilizationPercent = (roomDaysUsed / totalAvailableRoomDays) * 100;
            
            if(tableBody) {
                const row = document.createElement('tr');
                row.className = 'border-b';
                if (i === 2 || i === 3) row.classList.add('bg-yellow-50');
                row.innerHTML = `
                    <td class="py-2 px-2">${monthNames[i]}</td>
                    <td class="py-2 px-2 font-mono text-right">${currencyFormatter.format(monthlyTotal)}</td>
                    <td class="py-2 px-2 font-mono text-right">${utilizationPercent.toFixed(1)}%</td>`;
                tableBody.appendChild(row);
            }
        }
        
        document.querySelectorAll('.model3-btn').forEach(button => button.classList.remove('active'));
        const activeBtn = document.querySelector(`#model3-controls button[onclick*="'${scenario}'"]`);
        if(activeBtn) activeBtn.classList.add('active');
    }

    // Initialize sub-models
    const utilButton = document.querySelector('#utilization-controls button:nth-child(2)');
    if(utilButton) calculateUtilization(0.50, utilButton);
    updateModel3('base');
});
</script>

</body>
</html>
